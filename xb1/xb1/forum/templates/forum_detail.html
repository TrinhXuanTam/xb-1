{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block include %}
    <link rel="stylesheet" href="{% static 'css/article_detail.css' %}" >
    <link rel="stylesheet" href="{% static 'css/forum_comments.css' %}" >
{% endblock %}

{% block content %}
<div class="main">

    
    <h1>{{ object.title }}</h1>
    <h2>{{ object.description }}</h2>
    <br>

    <div class="comments">
        <ul>
            {% include "forum_comment.html" %}
        </ul>



        <!-- Post a comment -->
        <script>
            $(".comment_reply_form").submit(function(event) {
                event.preventDefault();
                ref = $(this)
                $.ajax({
                    type:'POST',
                    async: true,
                    cache: false,
                    url:'{% url "forum:post_comment" %}',
                    data: {
                        csrfmiddlewaretoken: $(this).find("input[type='hidden']").val(),
                        forum_id: "{{ object.pk }}",
                        text: $(this).find("textarea").val(),
                        comment_id: ref.attr('id')
                    },
                    success: function(data) {
                        ref.parents().eq(3).find(".subcomments ul").prepend(data)
                        // alert(ref.parents().eq(2).attr('class'))
                        ref.find("textarea").val('')
                    }
                });
            })
        </script>
    </div>

</div>
{% endblock %}
