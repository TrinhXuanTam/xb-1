{% extends 'base.html' %}
{% load static %}

{% block include %}
<link rel="stylesheet" href="{% static 'css/layout_shopIndex.css' %}" >
{% endblock %}

{%block content %}
<div class="shopOrderBox">
	{% if request.session.orderList == None %}
		Košík je prázdný
	{% else %}
		{% for orderItem in orderItems %}
			Jméno: {{ orderItem.0.itemName }} Počet: {{ orderItem.1 }} Cena za kus: {{ orderItem.0.itemPrice }} 
			<a href="{% url 'eshop:cartItemAdd' pk=orderItem.0.pk %}">Přidat</a>
			<a href="{% url 'eshop:cartItemRemove' pk=orderItem.0.pk %}">Odebrat</a>
			<a href="{% url 'eshop:cartItemDiscard' pk=orderItem.0.pk %}">Smazat</a>
		{% endfor %}
	<a href="{% url 'eshop:cartItemsDiscard' %}">Smazat vše</a>	
	
	Celková cena: {{ totalPrice }}
	<a href="{% url 'eshop:manageOrderCreate' %}">Objednat</a>
	{% endif %}
	
</div>

<div class="shopItemBox">
<ul>
	{% for shopItem in object_list %}
	{% if shopItem.itemActive == True %}
    <li>
		{%if shopItem.itemType != 2 %}
		<div class="shopSpecialItem shopSpecial{{ shopItem.itemType }}">{{ shopItem.get_itemType_display }}</div>
		{% endif %}
		<div class="shopOfferItem">	
			<div class="shopOfferImage">
				<img class=shopOfferImage src="{{ shopItem.itemImg.url }}">
			</div>
			<div class="shopOfferText">
				<span class="shopOfferName">{{ shopItem.itemName }}</span>
				<div class="shopOfferDesc">{{ shopItem.itemDesc }}</div>
			</div>
			<div class="shopOfferControl">
				<div>{{ shopItem.itemPrice }}</div>
				<div><a href="{% url 'eshop:cartItemAdd' pk=shopItem.pk %}">Objednat</a></div>
			</div>
		</div>
	</li>
	{% endif %}
    {% endfor %}
</ul>
</div>
{% if perms.eshop.add_shopitem %}
<div>
	<a href="{% url 'eshop:manageShopCreate' %}">Nový produkt</a>
</div>
{% endif %}
{% if perms.eshop.view_shopitem %}
<div>
	<a href="{% url 'eshop:manageShopList' %}">Zobrazit seznam produktů</a>
</div>
{% endif %}
{% endblock %}
